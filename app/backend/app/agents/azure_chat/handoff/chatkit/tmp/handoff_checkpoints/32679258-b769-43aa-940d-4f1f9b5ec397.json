{
  "checkpoint_id": "32679258-b769-43aa-940d-4f1f9b5ec397",
  "workflow_id": "dc5b608a-17a1-4067-9179-fd00a5c59e3c",
  "timestamp": "2025-11-20T09:38:26.675418+00:00",
  "messages": {},
  "shared_state": {
    "_executor_state": {
      "handoff-coordinator": {
        "conversation": [
          {
            "role": {
              "__af_model__": "agent_framework._types:Role",
              "strategy": "to_dict",
              "value": {
                "type": "role",
                "value": "user"
              }
            },
            "contents": [
              {
                "__af_model__": "agent_framework._types:TextContent",
                "strategy": "to_dict",
                "value": {
                  "type": "text",
                  "text": "Hi, my order 12345 arrived damaged. I need a refund."
                }
              }
            ],
            "author_name": null,
            "message_id": null,
            "additional_properties": {}
          },
          {
            "role": {
              "__af_model__": "agent_framework._types:Role",
              "strategy": "to_dict",
              "value": {
                "type": "role",
                "value": "assistant"
              }
            },
            "contents": [
              {
                "__af_model__": "agent_framework._types:FunctionCallContent",
                "strategy": "to_dict",
                "value": {
                  "type": "function_call",
                  "call_id": "call_xnB9Un95gtJF0E1j8V8gYQvQ",
                  "name": "handoff_to_refund_agent",
                  "arguments": "{\"context\":\"Customer's order 12345 arrived damaged and they are requesting a refund.\"}"
                }
              }
            ],
            "author_name": "triage_agent",
            "message_id": "chatcmpl-CdvPCS1rCniAHpDzPNA6jlnWe1Tz0",
            "additional_properties": {}
          },
          {
            "role": {
              "__af_model__": "agent_framework._types:Role",
              "strategy": "to_dict",
              "value": {
                "type": "role",
                "value": "tool"
              }
            },
            "contents": [
              {
                "__af_model__": "agent_framework._types:FunctionResultContent",
                "strategy": "to_dict",
                "value": {
                  "type": "function_result",
                  "call_id": "call_xnB9Un95gtJF0E1j8V8gYQvQ",
                  "result": {
                    "handoff_to": "refund_agent"
                  }
                }
              }
            ],
            "author_name": "triage_agent",
            "message_id": null,
            "additional_properties": {}
          },
          {
            "role": {
              "__af_model__": "agent_framework._types:Role",
              "strategy": "to_dict",
              "value": {
                "type": "role",
                "value": "assistant"
              }
            },
            "contents": [
              {
                "__af_model__": "agent_framework._types:TextContent",
                "strategy": "to_dict",
                "value": {
                  "type": "text",
                  "text": "I'm sorry to hear that your order 12345 arrived damaged. I'll transfer you to our refund agent who will assist you with the refund process."
                }
              }
            ],
            "author_name": "triage_agent",
            "message_id": "chatcmpl-CdvPDeYsCZSObDwtE5M9IUSRTg2qT",
            "additional_properties": {
              "system_fingerprint": "fp_f99638a8d7",
              "logprobs": null
            }
          },
          {
            "role": {
              "__af_model__": "agent_framework._types:Role",
              "strategy": "to_dict",
              "value": {
                "type": "role",
                "value": "tool"
              }
            },
            "contents": [
              {
                "__af_model__": "agent_framework._types:FunctionResultContent",
                "strategy": "to_dict",
                "value": {
                  "type": "function_result",
                  "call_id": "call_xnB9Un95gtJF0E1j8V8gYQvQ",
                  "result": {
                    "handoff_to": "refund_agent"
                  }
                }
              }
            ],
            "author_name": "handoff_to_refund_agent",
            "message_id": null,
            "additional_properties": {}
          },
          {
            "role": {
              "__af_model__": "agent_framework._types:Role",
              "strategy": "to_dict",
              "value": {
                "type": "role",
                "value": "assistant"
              }
            },
            "contents": [
              {
                "__af_model__": "agent_framework._types:TextContent",
                "strategy": "to_dict",
                "value": {
                  "type": "text",
                  "text": "Thank you for letting me know. I’ve recorded your refund request for order 12345, citing the damage to your item. Our team will review your case and process the refund as soon as possible.\n\nIf you have any additional details or photos of the damage, sharing them may help speed up the review. Is there anything else I can assist you with?"
                }
              }
            ],
            "author_name": "refund_agent",
            "message_id": "chatcmpl-CdvPMEpvIWlQJV7wnvXzN1No6catk",
            "additional_properties": {
              "system_fingerprint": "fp_f99638a8d7",
              "logprobs": null
            }
          }
        ],
        "round_index": 0,
        "metadata": {}
      },
      "triage_agent": {
        "cache": [],
        "agent_thread": {
          "type": "agent_thread_state",
          "service_thread_id": null,
          "chat_message_store_state": {
            "type": "chat_message_store_state",
            "messages": [
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "user"
                },
                "contents": [
                  {
                    "type": "text",
                    "annotations": null,
                    "text": "Hi, my order 12345 arrived damaged. I need a refund."
                  }
                ],
                "author_name": null,
                "message_id": null,
                "additional_properties": {}
              },
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "assistant"
                },
                "contents": [
                  {
                    "type": "function_call",
                    "annotations": null,
                    "call_id": "call_xnB9Un95gtJF0E1j8V8gYQvQ",
                    "name": "handoff_to_refund_agent",
                    "arguments": "{\"context\":\"Customer's order 12345 arrived damaged and they are requesting a refund.\"}",
                    "exception": null
                  }
                ],
                "author_name": "triage_agent",
                "message_id": "chatcmpl-CdvPCS1rCniAHpDzPNA6jlnWe1Tz0",
                "additional_properties": {}
              },
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "tool"
                },
                "contents": [
                  {
                    "type": "function_result",
                    "annotations": null,
                    "call_id": "call_xnB9Un95gtJF0E1j8V8gYQvQ",
                    "result": {
                      "handoff_to": "refund_agent"
                    },
                    "exception": null
                  }
                ],
                "author_name": "triage_agent",
                "message_id": null,
                "additional_properties": {}
              },
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "assistant"
                },
                "contents": [
                  {
                    "type": "text",
                    "annotations": null,
                    "text": "I'm sorry to hear that your order 12345 arrived damaged. I'll transfer you to our refund agent who will assist you with the refund process."
                  }
                ],
                "author_name": "triage_agent",
                "message_id": "chatcmpl-CdvPDeYsCZSObDwtE5M9IUSRTg2qT",
                "additional_properties": {}
              }
            ]
          }
        },
        "pending_agent_requests": {},
        "pending_responses_to_agent": []
      },
      "refund_agent": {
        "cache": [],
        "agent_thread": {
          "type": "agent_thread_state",
          "service_thread_id": null,
          "chat_message_store_state": {
            "type": "chat_message_store_state",
            "messages": [
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "user"
                },
                "contents": [
                  {
                    "type": "text",
                    "annotations": null,
                    "text": "Hi, my order 12345 arrived damaged. I need a refund."
                  }
                ],
                "author_name": null,
                "message_id": null,
                "additional_properties": {}
              },
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "assistant"
                },
                "contents": [
                  {
                    "type": "text",
                    "annotations": null,
                    "text": "I'm sorry to hear that your order 12345 arrived damaged. I'll transfer you to our refund agent who will assist you with the refund process."
                  }
                ],
                "author_name": "triage_agent",
                "message_id": "chatcmpl-CdvPDeYsCZSObDwtE5M9IUSRTg2qT",
                "additional_properties": {
                  "system_fingerprint": "fp_f99638a8d7",
                  "logprobs": null
                }
              },
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "assistant"
                },
                "contents": [
                  {
                    "type": "function_call",
                    "annotations": null,
                    "call_id": "call_aaKSDIvZOrIGUHnNBMNbx2I0",
                    "name": "submit_refund",
                    "arguments": "{\"refund_description\":\"Order arrived damaged.\",\"amount\":\"Full amount\",\"order_id\":\"12345\"}",
                    "exception": null
                  }
                ],
                "author_name": "refund_agent",
                "message_id": "chatcmpl-CdvPESSuYayD4OuPJWtpKfEWmvTyG",
                "additional_properties": {}
              },
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "tool"
                },
                "contents": [
                  {
                    "type": "function_result",
                    "annotations": null,
                    "call_id": "call_aaKSDIvZOrIGUHnNBMNbx2I0",
                    "result": "refund recorded for order 12345 (amount: Full amount) with details: Order arrived damaged.",
                    "exception": null
                  }
                ],
                "author_name": null,
                "message_id": null,
                "additional_properties": {}
              },
              {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "assistant"
                },
                "contents": [
                  {
                    "type": "text",
                    "annotations": null,
                    "text": "Thank you for letting me know. I’ve recorded your refund request for order 12345, citing the damage to your item. Our team will review your case and process the refund as soon as possible.\n\nIf you have any additional details or photos of the damage, sharing them may help speed up the review. Is there anything else I can assist you with?"
                  }
                ],
                "author_name": "refund_agent",
                "message_id": "chatcmpl-CdvPMEpvIWlQJV7wnvXzN1No6catk",
                "additional_properties": {}
              }
            ]
          }
        },
        "pending_agent_requests": {},
        "pending_responses_to_agent": []
      },
      "order_agent": {
        "cache": [],
        "agent_thread": {
          "type": "agent_thread_state",
          "service_thread_id": null,
          "chat_message_store_state": null
        },
        "pending_agent_requests": {},
        "pending_responses_to_agent": []
      },
      "input-conversation": {},
      "handoff-user-input": {}
    }
  },
  "pending_request_info_events": {
    "d4a70a8c-c79c-4637-8e4f-126c527a16de": {
      "data": {
        "__af_dataclass__": "agent_framework._workflows._handoff:HandoffUserInputRequest",
        "value": {
          "conversation": [
            {
              "__af_model__": "agent_framework._types:ChatMessage",
              "strategy": "to_dict",
              "value": {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "user"
                },
                "contents": [
                  {
                    "type": "text",
                    "text": "Hi, my order 12345 arrived damaged. I need a refund."
                  }
                ],
                "additional_properties": {}
              }
            },
            {
              "__af_model__": "agent_framework._types:ChatMessage",
              "strategy": "to_dict",
              "value": {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "assistant"
                },
                "contents": [
                  {
                    "type": "text",
                    "text": "I'm sorry to hear that your order 12345 arrived damaged. I'll transfer you to our refund agent who will assist you with the refund process."
                  }
                ],
                "author_name": "triage_agent",
                "message_id": "chatcmpl-CdvPDeYsCZSObDwtE5M9IUSRTg2qT",
                "additional_properties": {
                  "system_fingerprint": "fp_f99638a8d7",
                  "logprobs": null
                }
              }
            },
            {
              "__af_model__": "agent_framework._types:ChatMessage",
              "strategy": "to_dict",
              "value": {
                "type": "chat_message",
                "role": {
                  "type": "role",
                  "value": "assistant"
                },
                "contents": [
                  {
                    "type": "text",
                    "text": "Thank you for letting me know. I’ve recorded your refund request for order 12345, citing the damage to your item. Our team will review your case and process the refund as soon as possible.\n\nIf you have any additional details or photos of the damage, sharing them may help speed up the review. Is there anything else I can assist you with?"
                  }
                ],
                "author_name": "refund_agent",
                "message_id": "chatcmpl-CdvPMEpvIWlQJV7wnvXzN1No6catk",
                "additional_properties": {
                  "system_fingerprint": "fp_f99638a8d7",
                  "logprobs": null
                }
              }
            }
          ],
          "awaiting_agent_id": "refund_agent",
          "prompt": "Provide your next input for the conversation.",
          "source_executor_id": "handoff-user-input"
        }
      },
      "request_id": "d4a70a8c-c79c-4637-8e4f-126c527a16de",
      "source_executor_id": "handoff-user-input",
      "request_type": "agent_framework._workflows._handoff.HandoffUserInputRequest",
      "response_type": "builtins.object"
    }
  },
  "iteration_count": 3,
  "metadata": {
    "superstep": 3,
    "checkpoint_type": "superstep",
    "graph_signature": "0fba4d3fb1cb7ab53d3642e1ab9a75153d1ebb9a3f9d84ca1234145d9fd2401a"
  },
  "version": "1.0"
}